import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt
import pandas as pd

titanic_df = pd.read_csv('train.csv')

titanic_df['Survived'] = titanic_df['Survived'].map({
    0:'Died',
    1:'Survived'
})

print('-----Data Members before dropping column-----')
print(titanic_df.head(5))

print('\n\n-----DATA TRANSFORMATION-----\n\n')

print('=====Data headers after dropping columns- First Way=====')
titanic_df.drop(['Parch','PassengerId','Name','Ticket'],axis=1,inplace=True)
print(titanic_df.head(5))

print('=====Data headers after dropping columns- Second Way=====')
titanic_df.drop(['SibSp','Fare'],axis=1,)
print(titanic_df.head(5))

titanic_df ['Pclass'] = titanic_df['Pclass'].map({
    1:'Luxury Class',
    2:'Economy Class',
    3:'Lower Class'
})

print('=====Data Headers after transforming class column=====')
print(titanic_df.head(5))

titanic_df['Embarked'] = titanic_df['Embarked'].fillna("S")
print('=====Data headers after filling with default value for embarked column=====')
print(titanic_df.head(5))

titanic_df['Embarked'] = titanic_df['Embarked'].map({
    'C':"Cherbourg",
    'S':"Southampton",
    'Q':"Queenstown"
})
print("=====Data headers after transforming embarked column=====")
print(titanic_df.head(5))

print('\n\n-----DATA VISUALISATION-----\n\n')

print("Visualisation #1 == Survival Rate v/s Passenger Class")
ax = sns.countplot(x='Pclass',hue = 'Survived',palette = 'Set1',data = titanic_df)
ax.set(title = 'Passenger status(survived/died) against passenger class',xlabel = 'Passenger Class',ylabel = 'Total')
plt.show()

print("Visualisation #2 == Survival Rate v/s Gender")
print(pd.crosstab(titanic_df['Sex'],titanic_df.Survived))
ax = sns.countplot(x='Sex',hue = 'Survived',palette = 'Set2',data = titanic_df)
ax.set(title = 'Total survivors according to Sex',xlabel = 'Sex',ylabel = 'Total')
plt.show()

print("Visualisation #3 == Survival Rate v/s Age group")
interval = (0,18,35,60,120)
categories = ['Children','Teens','Adult','Old']
titanic_df['Age_cats'] = pd.cut(titanic_df.Age,interval,labels=categories)
ax = sns.countplot(x='Age_cats',hue = 'Survived',palette = 'Set3',data = titanic_df)
ax.set(title = 'Agr categorical survival distribution',xlabel = 'Age Categorical',ylabel = 'Total')
plt.show()

print("Visualisation #4 == Survival Rate v/s Embarkment Port")
print(pd.crosstab(titanic_df['Embarked'],titanic_df.Survived))
ax = sns.countplot(x='Embarked',hue = 'Survived',palette = 'Set1',data = titanic_df)
ax.set(title = 'Survival distribution according to embarkment port',xlabel = 'Sex',ylabel = 'Total')
plt.show()
